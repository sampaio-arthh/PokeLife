<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="top.css"> <!-- CSS da navbar e de algumas configurações padronizadas -->
    <link rel="icon" type="image/x-icon" href="icon.png"> <!-- Logo da pokébola na guia -->
    <title>Informações - <%=pokemon.nome%></title>
</head>
<body>
    <nav>
        <div class="nav-in"> <!-- Cabeçalho padrão do site -->
            <a href="/"><h2>PokéLife</h2></a>
            <div class="cont-nav">
                <a href="pokemons"><h3>Pokémons</h3></a>
                <a href="trainers"><h3>Treinadores</h3></a>
                <a href="battles"><h3>Batalhas</h3></a>
            </div>
        </div>
    </nav><!-- Fim do cabeçalho -->
    <h1>Atualizar Informações</h1>
    <div class="container">
        <form id="pokemonForm" method="post"> <!-- Formulário de atualização -->
            <div class="form-int"> <!-- Div organizadora de conteúdo -->
                <div class="l1"><!-- Lado 1 -->
                    <input type="hidden" id="id_pokemon" name="id_pokemon" value="<%=pokemon.id_pokemon%>"> <!-- Id não pode ser disabled, mas também não precisa aparecer -->

                    <label for="inputNome">Nome do Pokémon</label>
                    <input type="text" id="inputNome" name="inputNome" value="<%=pokemon.nome%>" required>

                    <label for="inputTipo">Tipo(s) do Pokémon</label>
                    <input type="text" id="inputTipo" name= "inputTipo" value="<%=pokemon.tipo%>" required>

                    <label for="inputNvl">Nível do Pokémon</label>
                    <input type="number" id="inputNvl" name="inputNvl" value="<%=pokemon.nvl%>" required>

                    <label for="inputImagemUrl">Link da imagem</label>
                    <input type="text" id="inputImagemUrl" name="imagem_url" value="<%= pokemon.link %>" oninput="atualizarImagemPreview()"/> <!-- Input que executa a função toda vez que recebe algo -->

                    <button type="submit" onclick="submitForm('/editarPokemon')">Salvar</button>
                </div>
                <div class="l2"><!-- Lado 2 -->
                    <img id="imagemPreview" src="<%= pokemon.link%>" style="max-width: 200px; max-height: 200px;"/> <!-- Imagem dinâmica -->
                </div>
            </div>
        </form>

        <div class="caution"> <!-- Div de exclusão -->
            <div class="cont"> <!-- Div organizadora de caution -->
                <h2>Quer retirar seu pokémon ? Poxa...</h2>
                <button onclick="confirmForm('/delPokemon')">Excluir Pokémon</button> <!-- Confirmar remoção-->
            </div>
        </div>

    </div>
    
<script>
function submitForm(action) {
const form = document.getElementById('pokemonForm');
form.action = action;
form.submit();
}
function confirmForm(action) { /* Confirmar remoção */
    if(window.confirm("Você tem certeza disso ? Ao apagar um pokemon, você apaga TODOS os registros de que ele faz parte")){
        const form = document.getElementById('pokemonForm');
        form.action = action;
        form.submit();
    }
}
function atualizarImagemPreview() { /* Atualização da imagem */
const url = document.getElementById("inputImagemUrl").value;
document.getElementById("imagemPreview").src = url;
}
</script>
</body>

<!-- Estilos  -->
<style>
    nav{
        margin-bottom: 0;
    }
    h1{
        text-align: center;
        font-family: "Nunito", monospace;
        font-size: 24px;
        font-weight: 700;
        margin-top: 2.5vh;
    }
    form{
        width: 100vw;
        display: flex;
        justify-content: center;
        margin: 2.5vh 0;
    }
    .form-int{
        width: 50vw;
        height: 40vh;
        background-color: rgb(51, 146, 255);
        border-radius: 5px;
        box-shadow: rgba(17, 17, 26, 0.1) 0px 4px 16px, rgba(17, 17, 26, 0.1) 0px 8px 24px, rgba(17, 17, 26, 0.1) 0px 16px 56px;
    }
    .container{
        text-align: center;
    }
    .container button{
        width: 100px;
    }
    input{
        margin-bottom: 10px;
    }
    #inputNome{
        font-weight: 700;
    }
    img{
        border: 3px solid #f5f5f5;
        border-radius: 5px;
        box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 15px;
        background-color: #efe9e9;
    }
    .cont{
        background-color: #a8e0f6;
    }
</style>
</html>
